---
title: S3 연동
date: 2020-08-21
categories: diary aws s3
---
이번에 분단위로 쌓이는 로그파일을 5분단위로 통합해서 s3에 업로드하는 앱을 개발했다.

해당 앱에는 오래된 s3파일을 삭제하는 기능도 있었는데

각 날짜 폴더에 통합한 로그파일을 업로드하게 된다.

삭제를 하려 디렉토리 경로를 delete하는 코드를 작성했느데 해당 코드가 동작하지 않았다.

확인해 보니 s3에 저장되는 파일들은 각자 key를 가지고 있고, fullpath가 해당 키라서 하나하나 지워야된다고 한다.

그래서 결국 하나하나 지우는 로직으로 개발했더니 정상동작했다.

나중에는 디렉토리 삭제도 지원했으면 좋겠다.
